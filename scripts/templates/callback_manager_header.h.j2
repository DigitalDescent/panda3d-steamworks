{{ banner }}

#pragma once

#include "pandabase.h"
#include "steamPython_bindings.h"
#include <string>

////////////////////////////////////////////////////////////////////
//       Class : SteamCallbackManager
// Description : Manages Steamworks async call-result
//               dispatching and broadcast callback
//               events.  Call run_callbacks() every
//               frame from a Panda3D task.
//
//               Broadcast callbacks are delivered as
//               Panda3D events via the messenger.
//               Use self.accept() / self.ignore().
////////////////////////////////////////////////////////////////////
class EXPORT_CLASS SteamCallbackManager {
PUBLISHED:
  // Process pending Steam callbacks.  Call every frame.
  // On the first call, broadcast listeners are
  // automatically registered with Steam.
  static void run_callbacks();

  // Shut down all listeners and cancel pending async calls.
  static void shutdown();

private:
  SteamCallbackManager() = delete;
};
